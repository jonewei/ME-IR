2026-01-20 06:53:00,788 - __main__ - INFO - ============================================================
2026-01-20 06:53:00,789 - __main__ - INFO - ğŸš€ Starting Evaluation
2026-01-20 06:53:00,789 - __main__ - INFO - ============================================================
2026-01-20 06:53:00,789 - __main__ - INFO - ğŸ“‹ Loading config from experiments/exp_arqmath3.yaml
2026-01-20 06:53:00,792 - __main__ - INFO -    Config loaded: 6 sections
2026-01-20 06:53:00,793 - __main__ - INFO - ğŸ“‚ Loading formulas from data/processed/formulas.json
2026-01-20 06:53:08,969 - __main__ - INFO - âœ… Loaded 1132498 formulas
2026-01-20 06:53:09,092 - __main__ - INFO - ğŸ“‚ Loading pre-built index from artifacts/approach0_index.pkl
2026-01-20 06:53:16,317 - retrieval.approach0_hash - INFO - ğŸ“‚ Loaded index from artifacts/approach0_index.pkl (360146 buckets, 1132498 formulas)
2026-01-20 06:53:16,332 - __main__ - INFO - âœ… Index loaded: 360146 hash buckets, 1132498 formulas
2026-01-20 06:53:16,442 - __main__ - INFO - ğŸ“Š Index statistics:
2026-01-20 06:53:16,442 - __main__ - INFO -    Total buckets: 360146
2026-01-20 06:53:16,442 - __main__ - INFO -    Avg bucket size: 3.14
2026-01-20 06:53:16,442 - __main__ - INFO -    Collision rate: 15.39%
2026-01-20 06:53:16,442 - __main__ - INFO - ğŸ”§ Building search pipeline...
2026-01-20 06:53:20,914 - ranking.feature_builder - INFO -    Features: 20
2026-01-20 06:53:20,915 - ranking.feature_builder - INFO -    Normalize: False
2026-01-20 06:53:20,915 - ranking.feature_builder - INFO -    Strict validation: False
2026-01-20 06:53:20,934 - ranking.lgbm_ranker - INFO - âœ… Loaded LightGBM model from models/lgbm_ranker.txt
2026-01-20 06:53:20,935 - ranking.lgbm_ranker - INFO -    Model features: 20
2026-01-20 06:53:20,935 - ranking.lgbm_ranker - INFO -    Model trees: 100
2026-01-20 06:53:20,935 - filtering.formula_sts_model - INFO - âœ… Loading STS model: math-similarity/Bert-MLM_arXiv-MP-class_zbMath
2026-01-20 06:53:20,935 - filtering.formula_sts_model - INFO -    Device: cuda
2026-01-20 06:53:20,935 - filtering.formula_sts_model - INFO -    Threshold: 0.85
2026-01-20 06:53:20,938 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2026-01-20 06:53:20,938 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: math-similarity/Bert-MLM_arXiv-MP-class_zbMath
2026-01-20 06:53:26,102 - __main__ - INFO - ğŸ“‚ Loading PageRank from artifacts/pagerank.pkl
2026-01-20 06:53:27,211 - __main__ - INFO - ğŸ“Š PageRank stats:
2026-01-20 06:53:27,232 - __main__ - INFO -    Min: 0.000000
2026-01-20 06:53:27,253 - __main__ - INFO -    Max: 0.000003
2026-01-20 06:53:27,265 - __main__ - INFO -    Mean: 0.000001
2026-01-20 06:53:27,270 - __main__ - INFO - âœ… Pipeline built successfully
2026-01-20 06:53:27,270 - __main__ - INFO - ğŸ“‚ Loading queries from data/processed/queries.json
2026-01-20 06:53:27,270 - __main__ - INFO - âœ… Loaded 100 queries
2026-01-20 06:53:27,270 - __main__ - INFO - ğŸ“Š Query statistics:
2026-01-20 06:53:27,270 - __main__ - INFO -    Avg length: 37.9 chars
2026-01-20 06:53:27,270 - __main__ - INFO -    Max length: 114 chars
2026-01-20 06:53:27,270 - __main__ - INFO - ğŸ“‚ Loading relevance labels from data/processed/relevance_labels.json
2026-01-20 06:53:27,276 - __main__ - INFO - âœ… Loaded relevance labels:
2026-01-20 06:53:27,276 - __main__ - INFO -    Queries: 76
2026-01-20 06:53:27,276 - __main__ - INFO -    Total relevant pairs: 11538
2026-01-20 06:53:27,276 - __main__ - INFO -    Avg relevant per query: 151.8
2026-01-20 06:53:27,276 - __main__ - INFO - 
============================================================
2026-01-20 06:53:27,276 - __main__ - INFO - ğŸ” Running Evaluation
2026-01-20 06:53:27,277 - __main__ - INFO - ============================================================
2026-01-20 06:53:27,277 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\|A\|_2=\sqrt{\rho(A^TA)}'
   Skeleton: '\|V\|_N=\sqrt{\rho(V^VV)}'
   Hash: 010cf51fe2f4fa54...
2026-01-20 06:53:27,277 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-20 06:54:18,574 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 10 formulas from 10 buckets
2026-01-20 06:54:18,719 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 10 candidates, è€—æ—¶ 51.442s
2026-01-20 06:54:19,132 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 10 candidates
2026-01-20 06:54:19,132 - pipeline.search_pipeline - INFO -    Top 3: ['2784148', '28162054', '2879771']
2026-01-20 06:54:19,132 - pipeline.search_pipeline - ERROR - Stage 3 å¤±è´¥: name 'logger' is not defined
2026-01-20 06:54:19,132 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 10 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-20 06:54:19,133 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 10 candidates
2026-01-20 06:54:19,133 - pipeline.search_pipeline - INFO -    Final Top 3: ['28162054', '2879771', '2784148']
2026-01-20 06:54:19,133 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 10 candidates returned
2026-01-20 06:54:19,133 - pipeline.search_pipeline - INFO - Total Time: 51.855s
2026-01-20 06:54:19,133 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: 'z=\sqrt[n]{s}e^{\frac{i\varphi}{n}}'
   Skeleton: 'V=\sqrt[V]{V}V^{\frac{V\varphi}{V}}'
   Hash: 933537f25090f816...
2026-01-20 06:54:19,133 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
