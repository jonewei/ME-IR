2026-01-20 13:26:09,331 - INFO - ============================================================
2026-01-20 13:26:09,331 - INFO - ğŸš€ Starting Mathematical Expression Retrieval Evaluation
2026-01-20 13:26:09,331 - INFO - ============================================================
2026-01-20 13:26:09,334 - INFO - ğŸ“‚ Loading formulas from data/processed/formulas.json
2026-01-20 13:26:12,646 - INFO - ğŸ“‚ Loading pre-built index from artifacts/approach0_index.pkl
2026-01-20 13:26:16,127 - INFO - ğŸ“‚ Loaded index from artifacts/approach0_index.pkl (277815 buckets, 455241 formulas)
2026-01-20 13:26:16,138 - INFO - ğŸ”§ Building search pipeline components...
2026-01-20 13:26:20,604 - INFO -    Features: 20
2026-01-20 13:26:20,604 - INFO -    Normalize: False
2026-01-20 13:26:20,604 - INFO -    Strict validation: False
2026-01-20 13:26:20,623 - INFO - âœ… Loaded LightGBM model from models/lgbm_ranker.txt
2026-01-20 13:26:20,624 - INFO -    Model features: 20
2026-01-20 13:26:20,624 - INFO -    Model trees: 100
2026-01-20 13:26:20,624 - INFO - âœ… Loading STS model: math-similarity/Bert-MLM_arXiv-MP-class_zbMath
2026-01-20 13:26:20,624 - INFO -    Device: cuda
2026-01-20 13:26:20,624 - INFO -    Threshold: 0.6
2026-01-20 13:26:20,626 - INFO - Use pytorch device_name: cuda
2026-01-20 13:26:20,627 - INFO - Load pretrained SentenceTransformer: math-similarity/Bert-MLM_arXiv-MP-class_zbMath
2026-01-20 13:26:26,725 - INFO - âš ï¸  TEST MODE: Processing only first 2 queries.
2026-01-20 13:26:26,731 - INFO - 
------------------------------
2026-01-20 13:26:26,731 - INFO - ğŸ” EVALUATION IN PROGRESS
2026-01-20 13:26:26,731 - INFO - ------------------------------
2026-01-20 13:26:26,992 - INFO - ğŸ“Š Stage 1 (Recall): 109 candidates, è€—æ—¶ 0.260s
2026-01-20 13:26:28,636 - INFO - ğŸ“Š Stage 2 (Coarse Rank): 109 candidates
2026-01-20 13:26:28,637 - INFO -    Top 3: ['8231647', '8291597', '875396']
2026-01-20 13:26:28,637 - INFO - ğŸ” Applying STS filter (threshold=0.6) to 109 candidates
2026-01-20 13:26:32,568 - INFO - ğŸ“Š STS filtered: 89 remaining (è¿‡æ»¤ç‡: 18.3%)
2026-01-20 13:26:32,568 - INFO - ğŸ“Š Stage 3 (Filtering): 89 candidates, è¿‡æ»¤ç‡: 18.35%
2026-01-20 13:26:32,569 - INFO - ğŸ“Š Stage 4 (Graph Prior): 89 candidates
2026-01-20 13:26:32,569 - INFO -    Final Top 3: ['8231647', '8291597', '875396']
2026-01-20 13:26:32,569 - INFO - ğŸ“Š Final Result: 89 candidates returned
2026-01-20 13:26:32,569 - INFO - Total Time: 5.836s
2026-01-20 13:26:32,838 - INFO - ğŸ“Š Stage 1 (Recall): 96 candidates, è€—æ—¶ 0.267s
2026-01-20 13:26:34,051 - INFO - ğŸ“Š Stage 2 (Coarse Rank): 96 candidates
2026-01-20 13:26:34,051 - INFO -    Top 3: ['8231819', '8230604', '2740294']
2026-01-20 13:26:34,051 - INFO - ğŸ” Applying STS filter (threshold=0.6) to 96 candidates
2026-01-20 13:26:37,413 - INFO - ğŸ“Š STS filtered: 83 remaining (è¿‡æ»¤ç‡: 13.5%)
2026-01-20 13:26:37,413 - INFO - ğŸ“Š Stage 3 (Filtering): 83 candidates, è¿‡æ»¤ç‡: 13.54%
2026-01-20 13:26:37,414 - INFO - ğŸ“Š Stage 4 (Graph Prior): 83 candidates
2026-01-20 13:26:37,414 - INFO -    Final Top 3: ['8231819', '8230604', '2740294']
2026-01-20 13:26:37,414 - INFO - ğŸ“Š Final Result: 83 candidates returned
2026-01-20 13:26:37,414 - INFO - Total Time: 4.843s
2026-01-20 13:26:37,418 - INFO - ğŸ’¾ TREC run saved to results/20260120_132637/run.trec
2026-01-20 13:26:37,420 - INFO - 
============================================================
2026-01-20 13:26:37,420 - INFO - âœ… Evaluation Complete!
2026-01-20 13:26:37,420 - INFO - ğŸ“Š Results directory: results/20260120_132637
2026-01-20 13:26:37,420 - INFO - ğŸ“ˆ  Metrics: {'Recall@K': 0.0, 'MAP': 0.0, 'nDCG@K': 0.0}
2026-01-20 13:26:37,421 - INFO - ============================================================
