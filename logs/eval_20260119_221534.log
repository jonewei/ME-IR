2026-01-19 22:15:34,934 - __main__ - INFO - ============================================================
2026-01-19 22:15:34,934 - __main__ - INFO - ğŸš€ Starting Evaluation
2026-01-19 22:15:34,934 - __main__ - INFO - ============================================================
2026-01-19 22:15:34,934 - __main__ - INFO - ğŸ“‹ Loading config from experiments/exp_full.yaml
2026-01-19 22:15:34,938 - __main__ - INFO -    Config loaded: 7 sections
2026-01-19 22:15:34,938 - __main__ - INFO - ğŸ“‚ Loading formulas from data/processed/formulas.json
2026-01-19 22:15:34,938 - __main__ - INFO - âœ… Loaded 5 formulas
2026-01-19 22:15:34,938 - __main__ - INFO - ğŸ“‚ Loading pre-built index from artifacts/approach0_index.pkl
2026-01-19 22:15:34,939 - retrieval.approach0_hash - INFO - ğŸ“‚ Loaded index from artifacts/approach0_index.pkl (3 buckets, 5 formulas)
2026-01-19 22:15:34,939 - __main__ - INFO - âœ… Index loaded: 3 hash buckets, 5 formulas
2026-01-19 22:15:34,939 - __main__ - INFO - ğŸ“Š Index statistics:
2026-01-19 22:15:34,939 - __main__ - INFO -    Total buckets: 3
2026-01-19 22:15:34,939 - __main__ - INFO -    Avg bucket size: 1.67
2026-01-19 22:15:34,939 - __main__ - INFO -    Collision rate: 66.67%
2026-01-19 22:15:34,939 - __main__ - INFO - ğŸ”§ Building search pipeline...
2026-01-19 22:15:41,244 - ranking.feature_builder - INFO -    Features: 20
2026-01-19 22:15:41,244 - ranking.feature_builder - INFO -    Normalize: False
2026-01-19 22:15:41,244 - ranking.feature_builder - INFO -    Strict validation: False
2026-01-19 22:15:41,262 - ranking.lgbm_ranker - INFO - âœ… Loaded LightGBM model from models/lgbm_ranker.txt
2026-01-19 22:15:41,262 - ranking.lgbm_ranker - INFO -    Model features: 20
2026-01-19 22:15:41,262 - ranking.lgbm_ranker - INFO -    Model trees: 100
2026-01-19 22:15:45,699 - filtering.formula_sts_model - INFO - âœ… Loaded STS model: bert-base-uncased
2026-01-19 22:15:45,699 - filtering.formula_sts_model - INFO -    Device: cuda
2026-01-19 22:15:45,699 - filtering.formula_sts_model - INFO -    Max length: 256
2026-01-19 22:15:45,699 - filtering.formula_sts_model - INFO -    Threshold: 0.92
2026-01-19 22:15:45,699 - filtering.formula_sts_model - INFO -    Model labels: {0: 'LABEL_0', 1: 'LABEL_1'}
2026-01-19 22:15:45,699 - filtering.formula_sts_model - WARNING - âš ï¸  Label mapping mismatch!
   Expected: {0: 'different', 1: 'similar'}
   Model config: {0: 'LABEL_0', 1: 'LABEL_1'}
2026-01-19 22:15:45,700 - __main__ - INFO - ğŸ“‚ Loading PageRank from artifacts/pagerank.pkl
2026-01-19 22:15:45,700 - __main__ - INFO - ğŸ“Š PageRank stats:
2026-01-19 22:15:45,700 - __main__ - INFO -    Min: 0.064191
2026-01-19 22:15:45,700 - __main__ - INFO -    Max: 0.387002
2026-01-19 22:15:45,700 - __main__ - INFO -    Mean: 0.200000
2026-01-19 22:15:45,700 - __main__ - INFO - âœ… Pipeline built successfully
2026-01-19 22:15:45,700 - __main__ - INFO - ğŸ“‚ Loading queries from data/processed/queries.json
2026-01-19 22:15:45,700 - __main__ - INFO - âœ… Loaded 20 queries
2026-01-19 22:15:45,700 - __main__ - INFO - ğŸ“Š Query statistics:
2026-01-19 22:15:45,701 - __main__ - INFO -    Avg length: 17.2 chars
2026-01-19 22:15:45,701 - __main__ - INFO -    Max length: 31 chars
2026-01-19 22:15:45,701 - __main__ - INFO - ğŸ“‚ Loading relevance labels from data/processed/relevance_labels.json
2026-01-19 22:15:45,701 - __main__ - INFO - âœ… Loaded relevance labels:
2026-01-19 22:15:45,701 - __main__ - INFO -    Queries: 20
2026-01-19 22:15:45,701 - __main__ - INFO -    Total relevant pairs: 100
2026-01-19 22:15:45,701 - __main__ - INFO -    Avg relevant per query: 5.0
2026-01-19 22:15:45,701 - __main__ - INFO - 
============================================================
2026-01-19 22:15:45,701 - __main__ - INFO - ğŸ” Running Evaluation
2026-01-19 22:15:45,701 - __main__ - INFO - ============================================================
2026-01-19 22:15:45,702 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: 'x^2 + y^2'
   Skeleton: 'V^N+V^N'
   Hash: 1b9dae9a97c65569...
2026-01-19 22:15:45,702 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:45,703 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:45,703 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,069 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,069 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f4', 'f2']
2026-01-19 22:15:46,069 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,070 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,070 - pipeline.search_pipeline - INFO -    Final Top 3: ['f0', 'f4', 'f2']
2026-01-19 22:15:46,070 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,070 - pipeline.search_pipeline - INFO - Total Time: 0.368s
2026-01-19 22:15:46,070 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: 'E = mc^2'
   Skeleton: 'V=VV^N'
   Hash: 47158d5bb111bbaa...
2026-01-19 22:15:46,070 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,071 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,071 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO -    Top 3: ['f1', 'f2', 'f4']
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO -    Final Top 3: ['f1', 'f2', 'f4']
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,148 - pipeline.search_pipeline - INFO - Total Time: 0.078s
2026-01-19 22:15:46,149 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: 'a^2 + b^2 = c^2'
   Skeleton: 'V^N+V^N=V^N'
   Hash: 59a4cfcd1b44d900...
2026-01-19 22:15:46,149 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,149 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,149 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,226 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,226 - pipeline.search_pipeline - INFO -    Top 3: ['f2', 'f1', 'f0']
2026-01-19 22:15:46,226 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,226 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,226 - pipeline.search_pipeline - INFO -    Final Top 3: ['f2', 'f1', 'f0']
2026-01-19 22:15:46,227 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,227 - pipeline.search_pipeline - INFO - Total Time: 0.077s
2026-01-19 22:15:46,227 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\int_0^1 x^2 \, dx'
   Skeleton: '\int_N^NV^N\,VV'
   Hash: 693bdc44acae5c46...
2026-01-19 22:15:46,227 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,228 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,228 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,304 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,304 - pipeline.search_pipeline - INFO -    Top 3: ['f3', 'f4', 'f0']
2026-01-19 22:15:46,304 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,305 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,305 - pipeline.search_pipeline - INFO -    Final Top 3: ['f3', 'f4', 'f0']
2026-01-19 22:15:46,305 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,305 - pipeline.search_pipeline - INFO - Total Time: 0.077s
2026-01-19 22:15:46,305 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\frac{d}{dx} x^3'
   Skeleton: '\frac{V}{VV}V^N'
   Hash: 35ffa41b11380eb2...
2026-01-19 22:15:46,305 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,306 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,306 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO -    Top 3: ['f4', 'f1', 'f0']
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO -    Final Top 3: ['f4', 'f1', 'f0']
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,383 - pipeline.search_pipeline - INFO - Total Time: 0.078s
2026-01-19 22:15:46,384 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\sum_{i=1}^n i'
   Skeleton: '\sum_{V=N}^VV'
   Hash: 541bd7cf4832a79b...
2026-01-19 22:15:46,384 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,384 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,385 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,466 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,466 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f4', 'f1']
2026-01-19 22:15:46,466 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,467 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,467 - pipeline.search_pipeline - INFO -    Final Top 3: ['f0', 'f4', 'f1']
2026-01-19 22:15:46,467 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,467 - pipeline.search_pipeline - INFO - Total Time: 0.082s
2026-01-19 22:15:46,467 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\lim_{x \to 0} \frac{\sin x}{x}'
   Skeleton: '\lim_{V\toN}\frac{\sinx}{V}'
   Hash: d7489cea524bae2e...
2026-01-19 22:15:46,467 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,468 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,468 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO -    Top 3: ['f2', 'f4', 'f1']
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO -    Final Top 3: ['f2', 'f4', 'f1']
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,548 - pipeline.search_pipeline - INFO - Total Time: 0.081s
2026-01-19 22:15:46,549 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\nabla \cdot \vec{E}'
   Skeleton: '\nabla\cdot\vec{V}'
   Hash: ea36681759c188b7...
2026-01-19 22:15:46,549 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,549 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,549 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO -    Top 3: ['f4', 'f1', 'f0']
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO -    Final Top 3: ['f4', 'f1', 'f0']
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,625 - pipeline.search_pipeline - INFO - Total Time: 0.076s
2026-01-19 22:15:46,626 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\alpha^2 + \beta^2'
   Skeleton: '\alpha^N+\beta^N'
   Hash: c77ca2e79dab80e3...
2026-01-19 22:15:46,626 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,626 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,627 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO -    Top 3: ['f2', 'f0', 'f1']
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO -    Final Top 3: ['f2', 'f0', 'f1']
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,703 - pipeline.search_pipeline - INFO - Total Time: 0.077s
2026-01-19 22:15:46,704 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\sqrt{x^2 + y^2}'
   Skeleton: '\sqrt{V^N+V^N}'
   Hash: f7bf3e4f578d1db6...
2026-01-19 22:15:46,704 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,704 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,704 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,778 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,778 - pipeline.search_pipeline - INFO -    Top 3: ['f1', 'f0', 'f4']
2026-01-19 22:15:46,779 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,779 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,779 - pipeline.search_pipeline - INFO -    Final Top 3: ['f1', 'f4', 'f0']
2026-01-19 22:15:46,779 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,779 - pipeline.search_pipeline - INFO - Total Time: 0.075s
2026-01-19 22:15:46,779 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\log(xy)'
   Skeleton: '\logxy'
   Hash: 715864c79cf69cb0...
2026-01-19 22:15:46,779 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,780 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,780 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,854 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO -    Top 3: ['f4', 'f0', 'f2']
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO -    Final Top 3: ['f4', 'f0', 'f2']
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,855 - pipeline.search_pipeline - INFO - Total Time: 0.075s
2026-01-19 22:15:46,855 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\int e^x dx'
   Skeleton: '\inte^VVV'
   Hash: 4aedd0801b6e8a39...
2026-01-19 22:15:46,855 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,856 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,856 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:46,937 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:46,937 - pipeline.search_pipeline - INFO -    Top 3: ['f3', 'f2', 'f1']
2026-01-19 22:15:46,937 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:46,938 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:46,938 - pipeline.search_pipeline - INFO -    Final Top 3: ['f3', 'f2', 'f1']
2026-01-19 22:15:46,938 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:46,938 - pipeline.search_pipeline - INFO - Total Time: 0.082s
2026-01-19 22:15:46,938 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\frac{a+b}{c+d}'
   Skeleton: '\frac{V+V}{V+V}'
   Hash: 7a32fbe40c6d698d...
2026-01-19 22:15:46,938 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:46,939 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:46,939 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO -    Top 3: ['f2', 'f3', 'f1']
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO -    Final Top 3: ['f2', 'f3', 'f1']
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,019 - pipeline.search_pipeline - INFO - Total Time: 0.081s
2026-01-19 22:15:47,020 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\sin^2 x + \cos^2 x'
   Skeleton: '\sin^NV+\cos^NV'
   Hash: aae8b03ae1627a6c...
2026-01-19 22:15:47,020 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,020 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,021 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,097 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,097 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f3', 'f2']
2026-01-19 22:15:47,097 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,098 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,098 - pipeline.search_pipeline - INFO -    Final Top 3: ['f0', 'f3', 'f2']
2026-01-19 22:15:47,098 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,098 - pipeline.search_pipeline - INFO - Total Time: 0.077s
2026-01-19 22:15:47,098 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\det(A)'
   Skeleton: '\det(V)'
   Hash: dd6b5df26119079c...
2026-01-19 22:15:47,098 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,099 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,099 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,177 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,177 - pipeline.search_pipeline - INFO -    Top 3: ['f4', 'f1', 'f2']
2026-01-19 22:15:47,178 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,178 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,178 - pipeline.search_pipeline - INFO -    Final Top 3: ['f4', 'f1', 'f2']
2026-01-19 22:15:47,178 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,178 - pipeline.search_pipeline - INFO - Total Time: 0.079s
2026-01-19 22:15:47,178 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\mathbf{Ax} = \mathbf{b}'
   Skeleton: '\mathbf{VV}=\mathbf{V}'
   Hash: 5cf1cd01ce491fe6...
2026-01-19 22:15:47,178 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,179 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,179 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,255 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,255 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f2', 'f3']
2026-01-19 22:15:47,255 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,255 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,256 - pipeline.search_pipeline - INFO -    Final Top 3: ['f0', 'f2', 'f3']
2026-01-19 22:15:47,256 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,256 - pipeline.search_pipeline - INFO - Total Time: 0.077s
2026-01-19 22:15:47,256 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\int_0^{\infty} e^{-x} dx'
   Skeleton: '\int_N^{\infty}V^{-V}VV'
   Hash: 0c02c7e7400e1fc6...
2026-01-19 22:15:47,256 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,257 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,257 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,334 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,334 - pipeline.search_pipeline - INFO -    Top 3: ['f3', 'f4', 'f1']
2026-01-19 22:15:47,335 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,335 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,335 - pipeline.search_pipeline - INFO -    Final Top 3: ['f3', 'f4', 'f1']
2026-01-19 22:15:47,335 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,335 - pipeline.search_pipeline - INFO - Total Time: 0.078s
2026-01-19 22:15:47,335 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\partial f / \partial x'
   Skeleton: '\partialf/\partialx'
   Hash: 32f83dd1aa44ca92...
2026-01-19 22:15:47,335 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,336 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,336 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,417 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,417 - pipeline.search_pipeline - INFO -    Top 3: ['f1', 'f0', 'f4']
2026-01-19 22:15:47,417 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,417 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,418 - pipeline.search_pipeline - INFO -    Final Top 3: ['f1', 'f0', 'f4']
2026-01-19 22:15:47,418 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,418 - pipeline.search_pipeline - INFO - Total Time: 0.082s
2026-01-19 22:15:47,418 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\sum_{k=0}^{\infty} r^k'
   Skeleton: '\sum_{V=N}^{\infty}V^V'
   Hash: aa5c1ded4b92d37e...
2026-01-19 22:15:47,418 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,419 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,419 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,498 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO -    Top 3: ['f2', 'f1', 'f4']
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO -    Final Top 3: ['f2', 'f1', 'f4']
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,499 - pipeline.search_pipeline - INFO - Total Time: 0.080s
2026-01-19 22:15:47,499 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: '\forall x \in \mathbb{R}'
   Skeleton: '\forallx\in\mathbb{V}'
   Hash: ff88a06e8a291903...
2026-01-19 22:15:47,499 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:15:47,500 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:15:47,500 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:15:47,578 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:15:47,578 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f1', 'f2']
2026-01-19 22:15:47,579 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
2026-01-19 22:15:47,579 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 4 (Graph Prior): 5 candidates
2026-01-19 22:15:47,579 - pipeline.search_pipeline - INFO -    Final Top 3: ['f0', 'f1', 'f2']
2026-01-19 22:15:47,579 - pipeline.search_pipeline - INFO - ğŸ“Š Final Result: 5 candidates returned
2026-01-19 22:15:47,579 - pipeline.search_pipeline - INFO - Total Time: 0.079s
2026-01-19 22:15:47,579 - __main__ - INFO - 
============================================================
2026-01-19 22:15:47,579 - __main__ - INFO - ğŸ“Š Evaluation Results
2026-01-19 22:15:47,579 - __main__ - INFO - ============================================================
2026-01-19 22:15:47,579 - __main__ - INFO - Recall@K            : 1.0000
2026-01-19 22:15:47,579 - __main__ - INFO - MAP                 : 0.9175
2026-01-19 22:15:47,580 - __main__ - INFO - nDCG@K              : 0.9542
2026-01-19 22:15:47,588 - __main__ - INFO - 
ğŸ’¾ Results saved to results/20260119_221547/
2026-01-19 22:15:47,588 - __main__ - INFO - ============================================================
2026-01-19 22:15:47,588 - __main__ - INFO - âœ… Evaluation Complete
2026-01-19 22:15:47,588 - __main__ - INFO - ============================================================
