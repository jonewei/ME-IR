2026-01-19 22:10:27,068 - __main__ - INFO - ============================================================
2026-01-19 22:10:27,068 - __main__ - INFO - ğŸš€ Starting Evaluation
2026-01-19 22:10:27,068 - __main__ - INFO - ============================================================
2026-01-19 22:10:27,068 - __main__ - INFO - ğŸ“‹ Loading config from experiments/exp_full.yaml
2026-01-19 22:10:27,072 - __main__ - INFO -    Config loaded: 7 sections
2026-01-19 22:10:27,072 - __main__ - INFO - ğŸ“‚ Loading formulas from data/processed/formulas.json
2026-01-19 22:10:27,072 - __main__ - INFO - âœ… Loaded 5 formulas
2026-01-19 22:10:27,072 - __main__ - INFO - ğŸ“‚ Loading pre-built index from artifacts/approach0_index.pkl
2026-01-19 22:10:27,072 - retrieval.approach0_hash - INFO - ğŸ“‚ Loaded index from artifacts/approach0_index.pkl (3 buckets, 5 formulas)
2026-01-19 22:10:27,073 - __main__ - INFO - âœ… Index loaded: 3 hash buckets, 5 formulas
2026-01-19 22:10:27,073 - __main__ - INFO - ğŸ“Š Index statistics:
2026-01-19 22:10:27,073 - __main__ - INFO -    Total buckets: 3
2026-01-19 22:10:27,073 - __main__ - INFO -    Avg bucket size: 1.67
2026-01-19 22:10:27,073 - __main__ - INFO -    Collision rate: 66.67%
2026-01-19 22:10:27,073 - __main__ - INFO - ğŸ”§ Building search pipeline...
2026-01-19 22:10:30,070 - ranking.feature_builder - INFO -    Features: 20
2026-01-19 22:10:30,070 - ranking.feature_builder - INFO -    Normalize: False
2026-01-19 22:10:30,070 - ranking.feature_builder - INFO -    Strict validation: False
2026-01-19 22:10:30,092 - ranking.lgbm_ranker - INFO - âœ… Loaded LightGBM model from models/lgbm_ranker.txt
2026-01-19 22:10:30,092 - ranking.lgbm_ranker - INFO -    Model features: 20
2026-01-19 22:10:30,092 - ranking.lgbm_ranker - INFO -    Model trees: 100
2026-01-19 22:10:33,205 - filtering.formula_sts_model - INFO - âœ… Loaded STS model: bert-base-uncased
2026-01-19 22:10:33,206 - filtering.formula_sts_model - INFO -    Device: cuda
2026-01-19 22:10:33,206 - filtering.formula_sts_model - INFO -    Max length: 256
2026-01-19 22:10:33,206 - filtering.formula_sts_model - INFO -    Threshold: 0.92
2026-01-19 22:10:33,206 - filtering.formula_sts_model - INFO -    Model labels: {0: 'LABEL_0', 1: 'LABEL_1'}
2026-01-19 22:10:33,206 - filtering.formula_sts_model - WARNING - âš ï¸  Label mapping mismatch!
   Expected: {0: 'different', 1: 'similar'}
   Model config: {0: 'LABEL_0', 1: 'LABEL_1'}
2026-01-19 22:10:33,206 - __main__ - INFO - ğŸ“‚ Loading PageRank from artifacts/pagerank.pkl
2026-01-19 22:10:33,206 - __main__ - INFO - ğŸ“Š PageRank stats:
2026-01-19 22:10:33,206 - __main__ - INFO -    Min: 0.064191
2026-01-19 22:10:33,206 - __main__ - INFO -    Max: 0.387002
2026-01-19 22:10:33,206 - __main__ - INFO -    Mean: 0.200000
2026-01-19 22:10:33,206 - __main__ - INFO - âœ… Pipeline built successfully
2026-01-19 22:10:33,206 - __main__ - INFO - ğŸ“‚ Loading queries from data/processed/queries.json
2026-01-19 22:10:33,207 - __main__ - INFO - âœ… Loaded 20 queries
2026-01-19 22:10:33,207 - __main__ - INFO - ğŸ“Š Query statistics:
2026-01-19 22:10:33,207 - __main__ - INFO -    Avg length: 17.2 chars
2026-01-19 22:10:33,207 - __main__ - INFO -    Max length: 31 chars
2026-01-19 22:10:33,207 - __main__ - INFO - ğŸ“‚ Loading relevance labels from data/processed/relevance_labels.json
2026-01-19 22:10:33,207 - __main__ - INFO - âœ… Loaded relevance labels:
2026-01-19 22:10:33,207 - __main__ - INFO -    Queries: 20
2026-01-19 22:10:33,207 - __main__ - INFO -    Total relevant pairs: 100
2026-01-19 22:10:33,207 - __main__ - INFO -    Avg relevant per query: 5.0
2026-01-19 22:10:33,207 - __main__ - INFO - 
============================================================
2026-01-19 22:10:33,207 - __main__ - INFO - ğŸ” Running Evaluation
2026-01-19 22:10:33,208 - __main__ - INFO - ============================================================
2026-01-19 22:10:33,208 - retrieval.approach0_hash - INFO - ğŸ” [Approach0] Query: 'x^2 + y^2'
   Skeleton: 'V^N+V^N'
   Hash: 1b9dae9a97c65569...
2026-01-19 22:10:33,208 - retrieval.approach0_hash - INFO - âš ï¸  [Approach0] No exact match, using fuzzy retrieval
2026-01-19 22:10:33,209 - retrieval.approach0_hash - INFO - âœ… [Approach0] Fuzzy match: 5 formulas from 3 buckets
2026-01-19 22:10:33,209 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 1 (Recall): 5 candidates, è€—æ—¶ 0.001s
2026-01-19 22:10:33,562 - pipeline.search_pipeline - ERROR - Stage 2 å¤±è´¥: query_dict required for 20-feature mode
2026-01-19 22:10:33,562 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 2 (Coarse Rank): 5 candidates
2026-01-19 22:10:33,562 - pipeline.search_pipeline - INFO -    Top 3: ['f0', 'f4', 'f2']
2026-01-19 22:10:33,562 - pipeline.search_pipeline - INFO - ğŸ“Š Stage 3 (Filtering): 5 candidates, è¿‡æ»¤ç‡: 0.00%
